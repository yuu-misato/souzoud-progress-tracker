# MiERU サービス仕様書・利用マニュアル

**サービス名:** MiERU（ミエル）
**バージョン:** 1.0
**最終更新:** 2026年1月18日

---

## 目次

1. [サービス概要](#1-サービス概要)
2. [ユーザー種別と権限](#2-ユーザー種別と権限)
3. [管理者画面の使い方](#3-管理者画面の使い方)
4. [作業者画面の使い方](#4-作業者画面の使い方)
5. [クライアント画面の使い方](#5-クライアント画面の使い方)
6. [主要機能一覧](#6-主要機能一覧)
7. [データ構造](#7-データ構造)
8. [トラブルシューティング](#8-トラブルシューティング)

---

## 1. サービス概要

### MiERUとは

MiERUは、制作現場向けのプロジェクト進捗共有・管理サービスです。

**主な特徴:**
- プロジェクトの進捗状況をリアルタイムで可視化
- クライアントへの進捗共有が簡単
- 作業者へのタスク割り当てと成果物管理
- 複数の工程を同時並行で進行可能

### URL一覧

| 画面 | URL | 用途 |
|-----|-----|-----|
| 管理者画面 | `/admin.html` | プロジェクト・作業者管理 |
| 作業者画面 | `/worker.html` | タスク確認・成果物提出 |
| クライアント画面 | `/index.html` | 進捗確認（顧客向け） |
| 管理者ログイン | `/login.html` | 管理者専用ログイン |

---

## 2. ユーザー種別と権限

### 2.1 管理者（Admin）

管理者には3つの権限レベルがあります。

| 権限 | 説明 | できること |
|-----|------|----------|
| **master** | システム管理者 | 全機能利用可能、管理者の追加・削除 |
| **admin** | 管理者 | 全プロジェクト管理、作業者管理 |
| **director** | ディレクター | 担当プロジェクトの管理、タスク割り当て・承認 |

### 2.2 作業者（Worker）

- タスクの確認と成果物の提出
- 自分に割り当てられたタスクのみ表示
- プロジェクト全体の進捗確認

### 2.3 クライアント（Client）

- プロジェクトの進捗確認
- 工程の状態確認
- 納品物・関連ファイルへのアクセス

---

## 3. 管理者画面の使い方

### 3.1 ログイン

1. `/login.html` にアクセス
2. メールアドレスとパスワードを入力
3. 「ログイン」ボタンをクリック

### 3.2 ダッシュボード

ログイン後、ダッシュボードが表示されます。

**表示内容:**
- **進行中**: 現在進行中のプロジェクト数
- **承認待ち**: 承認が必要な提出物の数
- **完了**: 本日完了したタスク数
- **7日以内の提出期限**: 期限が近いタスク一覧

**操作:**
- ヘッダーの「MiERU」ロゴをクリック → ダッシュボードに戻る
- 7日以内のタスクをクリック → 工程編集モーダルが開く

### 3.3 プロジェクト管理

#### プロジェクトの作成

1. サイドバーの「+ 新規」ボタンをクリック
2. 以下の情報を入力:
   - **プロジェクト名**: 必須
   - **クライアント名**: 必須
   - **テンプレート**: 工程テンプレートを選択（任意）
   - **説明**: プロジェクトの概要
   - **専用フォルダURL**: Google Drive等のリンク
   - **納品物URL**: 最終納品物のリンク
   - **納品予定日**: カレンダーから選択
   - **担当ディレクター**: 担当者を選択
3. 「作成」ボタンをクリック

#### プロジェクトの編集

1. サイドバーからプロジェクトを選択
2. 右上の「編集」ボタンをクリック
3. 情報を修正して「保存」

#### プロジェクトの削除

1. プロジェクトを選択
2. 右上の「削除」ボタンをクリック
3. 確認ダイアログで「削除」を選択

#### クライアントへの共有

1. プロジェクトを選択
2. 「共有」ボタンをクリック
3. 共有リンクをコピーしてクライアントに送付
4. クライアント用ログインアカウントを作成可能

### 3.4 工程（ステップ）管理

#### 工程の追加

1. プロジェクトを選択
2. 「+ 追加」ボタンをクリック
3. 以下の情報を入力:
   - **工程名**: 必須
   - **仕様・要件**: クライアントにも表示される説明
   - **関連ファイルURL**: Google Docs等のリンク
   - **提出予定日**: お客様向けの表示日
4. 「保存」をクリック

#### 工程の編集

1. 工程名の部分をクリック
2. 編集モーダルで情報を修正
3. 「保存」をクリック

#### ステータスの変更

各工程には3つのステータスがあります:

| ステータス | 表示 | 説明 |
|----------|-----|------|
| **pending** | 未着手 | まだ開始していない |
| **current** | 進行中 | 現在作業中（複数可） |
| **completed** | 完了 | 作業完了 |

**ステータス変更方法:**
- ✓ ボタン: 完了にする
- 🚀 ボタン: 進行中にする
- ↩️ ボタン: 進行中に戻す

**注意:** 複数の工程を同時に「進行中」にできます。作業者が複数いる場合などに活用してください。

#### 工程の並び替え

- ↑ ボタン: 上に移動
- ↓ ボタン: 下に移動

#### 作業者の割り当て

1. 工程をクリックして編集モーダルを開く
2. 「作業者割り当て」セクションで:
   - **作業者**: プルダウンから選択
   - **期日**: 作業者向けの期限
   - **注意事項**: 作業者への指示
3. 「保存」をクリック

### 3.5 作業者管理

#### 作業者の登録

1. ヘッダーの「🔧 作業者」または「⚙️ 設定」→「作業者管理」
2. 「+ 作業者を追加」をクリック
3. 以下を入力:
   - **名前**: 表示名
   - **メールアドレス**: ログイン用
   - **パスワード**: 初期パスワード
4. 「追加」をクリック

#### 作業者の編集・削除

- 作業者一覧から対象を選択
- 「編集」または「削除」をクリック

### 3.6 承認管理

作業者から提出された成果物を確認・承認します。

1. ダッシュボードの「承認待ち」または「⚙️ 設定」→「承認管理」
2. 提出物の内容を確認
3. 「承認」または「差戻し」を選択
4. 差戻しの場合はコメントを入力

### 3.7 テンプレート管理

よく使う工程パターンをテンプレートとして保存できます。

#### テンプレートの作成

1. 「⚙️ 設定」→「テンプレート管理」
2. 「+ 新規テンプレート」をクリック
3. テンプレート名と工程を設定
4. 「保存」をクリック

#### テンプレートの使用

1. 新規プロジェクト作成時に「テンプレート」を選択
2. 選択したテンプレートの工程が自動で追加される

### 3.8 管理者設定

#### 管理者の追加（masterのみ）

1. 「⚙️ 設定」→「ユーザー管理」
2. 「+ 管理者を追加」をクリック
3. 情報を入力して「追加」

#### メール通知設定

1. 「⚙️ 設定」→「メール通知」
2. 通知の有効/無効を切り替え
3. 通知タイプごとに設定可能:
   - タスク割り当て時
   - 提出物受信時
   - 承認・差戻し時
   - 進捗更新時

---

## 4. 作業者画面の使い方

### 4.1 ログイン

1. `/worker.html` にアクセス
2. メールアドレスとパスワードを入力
3. 「ログイン」ボタンをクリック

### 4.2 タスク一覧

ログイン後、自分に割り当てられたタスクが表示されます。

**セクション分け:**
- **未提出**: まだ提出していないタスク
- **レビュー待ち**: 提出済み、承認待ち
- **完了**: 承認済みのタスク

### 4.3 タスク詳細

タスクをクリックすると詳細が表示されます。

**表示内容:**
- プロジェクト名・クライアント名
- 工程名
- 期日
- 注意事項（ディレクターからの指示）
- プロジェクト全体の進捗

### 4.4 成果物の提出

1. タスク詳細画面で「提出」ボタンをクリック
2. 以下を入力:
   - **成果物URL**: Google Docs、Figma等のリンク
   - **コメント**: 補足説明
3. 「提出」をクリック

### 4.5 提出履歴

過去の提出履歴と承認状況を確認できます。

- **submitted**: 提出済み
- **approved**: 承認済み
- **rejected**: 差戻し（コメントを確認して再提出）

---

## 5. クライアント画面の使い方

### 5.1 ログイン

1. `/index.html` にアクセス
2. 管理者から提供されたメールアドレスとパスワードを入力
3. 「ログイン」ボタンをクリック

### 5.2 プロジェクト一覧

ログイン後、自社のプロジェクト一覧が表示されます。

**表示内容:**
- プロジェクト名
- 進捗率（プログレスバー）
- 最終更新日時

### 5.3 プロジェクト詳細

プロジェクトをクリックすると詳細が表示されます。

**表示内容:**
- 工程一覧（タイムライン形式）
- 各工程のステータス（未着手/進行中/完了）
- 提出予定日
- 関連ファイルへのリンク
- 担当ディレクター情報
- 専用フォルダ・納品物へのリンク

---

## 6. 主要機能一覧

### 6.1 プロジェクト管理

| 機能 | 説明 |
|-----|------|
| プロジェクト作成 | 新規プロジェクトの登録 |
| プロジェクト編集 | 情報の更新 |
| プロジェクト削除 | プロジェクトの削除 |
| クライアント共有 | 進捗共有用リンクの生成 |
| テンプレート適用 | 定型工程の一括追加 |

### 6.2 工程管理

| 機能 | 説明 |
|-----|------|
| 工程追加 | 新規工程の追加 |
| 工程編集 | 工程情報の更新 |
| 工程削除 | 工程の削除 |
| 並び替え | 工程順序の変更 |
| ステータス変更 | 未着手/進行中/完了の切り替え |
| 作業者割り当て | 工程ごとに担当者を設定 |

### 6.3 タスク・提出管理

| 機能 | 説明 |
|-----|------|
| タスク割り当て | 作業者へのタスク配分 |
| 成果物提出 | URL+コメントで提出 |
| 承認・差戻し | 管理者による確認 |
| 提出履歴 | 過去の提出・承認履歴 |

### 6.4 ユーザー管理

| 機能 | 説明 |
|-----|------|
| 管理者管理 | 管理者の追加・編集・削除 |
| 作業者管理 | 作業者の追加・編集・削除 |
| クライアントユーザー | クライアント用アカウント管理 |
| 権限設定 | master/admin/director |

### 6.5 通知機能

| 通知タイプ | タイミング | 送信先 |
|----------|----------|-------|
| タスク割り当て | 新規タスク割り当て時 | 作業者 |
| 提出物受信 | 成果物提出時 | 管理者 |
| 承認通知 | 承認時 | 作業者 |
| 差戻し通知 | 差戻し時 | 作業者 |
| 進捗更新 | ステータス変更時 | クライアント |

---

## 7. データ構造

### 7.1 主要テーブル

```
clients（クライアント）
├── id: クライアントID
├── name: クライアント名
└── created_at: 作成日時

projects（プロジェクト）
├── id: プロジェクトID
├── name: プロジェクト名
├── client_id: クライアントID
├── description: 説明
├── folder_url: 専用フォルダURL
├── delivery_url: 納品物URL
├── due_date: 納品予定日
└── director_id: 担当ディレクターID

steps（工程）
├── id: 工程ID
├── project_id: プロジェクトID
├── step_order: 表示順
├── name: 工程名
├── description: 説明
├── status: ステータス（pending/current/completed）
├── url: 関連ファイルURL
└── due_date: 提出予定日

workers（作業者）
├── id: 作業者ID
├── email: メールアドレス
├── name: 名前
└── is_active: 有効/無効

task_assignments（タスク割り当て）
├── id: 割り当てID
├── step_id: 工程ID
├── project_id: プロジェクトID
├── worker_id: 作業者ID
├── due_date: 期日
├── notes: 注意事項
└── status: ステータス

submissions（提出物）
├── id: 提出ID
├── assignment_id: 割り当てID
├── url: 成果物URL
├── comment: コメント
├── status: ステータス（submitted/approved/rejected）
└── submitted_at: 提出日時
```

---

## 8. トラブルシューティング

### Q1: ログインできない

**確認事項:**
- メールアドレスとパスワードが正しいか
- Caps Lockがオンになっていないか
- 5回連続で失敗するとロックされる（1分後に再試行）

**解決方法:**
- 管理者にパスワードリセットを依頼

### Q2: プロジェクトが表示されない

**確認事項:**
- 正しいアカウントでログインしているか
- ディレクターの場合、担当プロジェクトに設定されているか

**解決方法:**
- master/admin権限の管理者に確認を依頼

### Q3: 工程のステータスが変更できない

**確認事項:**
- 権限があるか（担当プロジェクトか）
- ページを再読み込みしてみる

### Q4: 作業者にタスクが表示されない

**確認事項:**
- 工程に作業者が割り当てられているか
- 作業者アカウントが有効になっているか

**解決方法:**
- 管理画面で工程を開き、作業者割り当てを確認

### Q5: メール通知が届かない

**確認事項:**
- メール通知設定が有効になっているか
- 迷惑メールフォルダを確認
- メールアドレスが正しいか

**解決方法:**
- 管理画面の「⚙️ 設定」→「メール通知」で設定を確認

### Q6: 7日以内の提出期限に表示されない

**確認事項:**
- 工程に「提出予定日」が設定されているか
- 工程のステータスが「完了」になっていないか

**解決方法:**
- 工程を編集して「提出予定日」を設定

---

## 更新履歴

| 日付 | バージョン | 内容 |
|-----|----------|------|
| 2026/01/18 | 1.0 | 初版作成 |

---

**お問い合わせ**

サービスに関するご質問は、システム管理者までお問い合わせください。
